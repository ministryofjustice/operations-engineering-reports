{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "stop_db",
      "type": "shell",
      "command": ["docker stop dynamodb-local || echo 0 && exit"]
    },
    {
      "label": "create_table",
      "type": "shell",
      "command": "export AWS_ACCESS_KEY_ID=DUMMYIDEXAMPLE && export AWS_SECRET_ACCESS_KEY=DUMMYEXAMPLEKEY && export AWS_DEFAULT_REGION=eu-west-2 && docker pull amazon/dynamodb-local > /dev/null 2>&1 && docker run --rm -d --name dynamodb-local -p 8000:8000 amazon/dynamodb-local & disown && aws dynamodb create-table --cli-input-json file://dynambodb_testing/create-table.json --endpoint-url http://localhost:8000 > /dev/null 2>&1 && aws dynamodb batch-write-item --request-items file://dynambodb_testing/add-public-data.json --endpoint-url http://localhost:8000 > /dev/null 2>&1 && aws dynamodb batch-write-item --request-items file://dynambodb_testing/add-private-data.json --endpoint-url http://localhost:8000 > /dev/null 2>&1 && sleep 1"
    },
    {
      "label": "build_db",
      "dependsOn": ["stop_db", "create_table"]
    },
    {
      "label": "quit_db",
      "dependsOn": ["stop_db"]
    }
  ]
}
